#include <gtest/gtest.h>
#include <core/transform.h>

using namespace dakku;

TEST(Transform, Matrix) {
  Matrix4x4 m(10, 2, 13, 16, 11, 12, 20, 15, 16, 2, 8, 4, 5, 3, 11, 9);
  auto mInv = inverse(m);
  Matrix4x4 ans(0.034753363228699555, 0.010089686098654708, 0.06782511210762332,
                -0.10874439461883408, 0.02466367713004484, 0.1576980568011958,
                -0.032511210762331835, -0.2922272047832586, -0.1591928251121076,
                -0.07847533632286996, 0.028026905829596414, 0.4013452914798206,
                0.16704035874439463, 0.03774289985052317, -0.06109865470852018,
                -0.22159940209267565);
  EXPECT_EQ(mInv, ans) << mInv;
  EXPECT_EQ(transpose(transpose(m)), m);
  ans = Matrix4x4(10, 11, 16, 5, 2, 12, 2, 3, 13, 20, 8, 11, 16, 15, 4, 9);
  EXPECT_EQ(transpose(m), ans);
}